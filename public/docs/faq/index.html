<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg"
    />
    <link rel="stylesheet" href="/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.5.26
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.includes(e) ? e : r[0]
        );
      })();
    </script>
    <title>FAQ</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/docs/faq" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="/">UmiJS</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a aria-current="page" class="active" href="/docs">Docs</a></span><span><a href="/config">Config</a></span><span><a href="/api">API</a></span><span><a href="/guide">Guide</a></span><span><a href="/plugins">Plugins</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://v2.umijs.org">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><div class="__dumi-default-locale-select" data-locale-count="2"><a href="/zh-CN/docs/faq">中文</a></div><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="/"></a><h1>UmiJS</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/docs">Docs</a></li><li><a href="/config">Config</a></li><li><a href="/api">API</a></li><li><a href="/guide">Guide</a></li><li><a href="/plugins">Plugins</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://v2.umijs.org">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><a href="/zh-CN/docs/faq">中文</a></div><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a target="_blank" rel="noopener noreferrer">VERSION 3.X</a></li><li><a target="_blank" rel="noopener noreferrer">Introduce</a><ul><li><a href="/docs"><span>Introduce</span></a></li><li><a href="/docs/how-umi-works"><span>How Umi Works</span></a></li><li><a href="/docs/getting-started"><span>Getting Started</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">Umi Basic</a><ul><li><a href="/docs/directory-structure"><span>Directory structure</span></a></li><li><a href="/docs/config"><span>Config</span></a></li><li><a href="/docs/runtime-config"><span>Runtime Config</span></a></li><li><a href="/docs/routing"><span>Routing</span></a></li><li><a href="/docs/convention-routing"><span>Convention Routing</span></a></li><li><a href="/docs/plugin"><span>Plugin</span></a></li><li><a href="/docs/navigate-between-pages"><span>Navigate Between Pages</span></a></li><li><a href="/docs/html-template"><span>HTML Template</span></a></li><li><a href="/docs/mock"><span>Mock Data</span></a></li><li><a href="/docs/env-variables"><span>Env Variables</span></a></li><li><a href="/docs/cli"><span>Cli Commands</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">Styles and Assets</a><ul><li><a href="/docs/assets-css"><span>Use CSS</span></a></li><li><a href="/docs/assets-image"><span>Use Image</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">Umi Advanced</a><ul><li><a href="/docs/load-on-demand"><span>Load On Demand</span></a></li><li><a href="/docs/fast-refresh"><span>快速刷新（Fast Refresh）</span></a></li><li><a href="/docs/deployment"><span>Deployment</span></a></li><li><a href="/docs/use-umi-ui"><span>Using Umi UI</span></a></li><li><a href="/docs/ssr"><span>服务端渲染（SSR）</span></a></li><li><a href="/docs/mfsu"><span>MFSU（Module Federation Speed Up）</span></a></li></ul></li><li><a href="/docs/upgrade-to-umi-3">Upgrade to Umi 3</a></li><li><a href="/docs/contributing">CONTRIBUTING</a></li><li><a aria-current="page" class="active" href="/docs/faq">FAQ</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="General" data-depth="2"><a href="/docs/faq#general"><span>General</span></a></li><li title="Umi 3 只能用 TypeScript 写吗？" data-depth="3"><a href="/docs/faq#umi-3-只能用-typescript-写吗？"><span>Umi 3 只能用 TypeScript 写吗？</span></a></li><li title="使用 React 17" data-depth="3"><a href="/docs/faq#使用-react-17"><span>使用 React 17</span></a></li><li title="import from umi 没有定义怎么办？" data-depth="3"><a href="/docs/faq#import-from-umi-没有定义怎么办？"><span>import from umi 没有定义怎么办？</span></a></li><li title="如何动态修改 title ？" data-depth="3"><a href="/docs/faq#如何动态修改-title-？"><span>如何动态修改 title ？</span></a></li><li title="layout 路由如何传值给子路由" data-depth="3"><a href="/docs/faq#layout-路由如何传值给子路由"><span>layout 路由如何传值给子路由</span></a></li><li title="报错" data-depth="2"><a href="/docs/faq#报错"><span>报错</span></a></li><li title="umi 不是内部或外部命令" data-depth="3"><a href="/docs/faq#umi-不是内部或外部命令"><span>umi 不是内部或外部命令</span></a></li><li title="配了 dynamicImport.loading 后外层报错不生效怎么办？" data-depth="3"><a href="/docs/faq#配了-dynamicimportloading-后外层报错不生效怎么办？"><span>配了 dynamicImport.loading 后外层报错不生效怎么办？</span></a></li><li title="ie报错和压缩问题解决思路" data-depth="3"><a href="/docs/faq#ie报错和压缩问题解决思路"><span>ie报错和压缩问题解决思路</span></a></li><li title="The dependency was not found" data-depth="3"><a href="/docs/faq#the-dependency-was-not-found"><span>The dependency was not found</span></a></li><li title="webpack" data-depth="2"><a href="/docs/faq#webpack"><span>webpack</span></a></li><li title="如何配置额外的 loader ?" data-depth="3"><a href="/docs/faq#如何配置额外的-loader-"><span>如何配置额外的 loader ?</span></a></li><li title="CSS" data-depth="2"><a href="/docs/faq#css"><span>CSS</span></a></li><li title="为啥我 import 的 css 文件不生效？" data-depth="3"><a href="/docs/faq#为啥我-import-的-css-文件不生效？"><span>为啥我 import 的 css 文件不生效？</span></a></li><li title="如何禁用 css modules ？" data-depth="3"><a href="/docs/faq#如何禁用-css-modules-？"><span>如何禁用 css modules ？</span></a></li><li title="如何使用 sass ？" data-depth="3"><a href="/docs/faq#如何使用-sass-？"><span>如何使用 sass ？</span></a></li><li title="如何禁用掉每次刷新路由时出现的 loading... 状态？" data-depth="3"><a href="/docs/faq#如何禁用掉每次刷新路由时出现的-loading-状态？"><span>如何禁用掉每次刷新路由时出现的 loading... 状态？</span></a></li><li title="Test" data-depth="2"><a href="/docs/faq#test"><span>Test</span></a></li><li title="如何断点调试" data-depth="3"><a href="/docs/faq#如何断点调试"><span>如何断点调试</span></a></li><li title="请求" data-depth="2"><a href="/docs/faq#请求"><span>请求</span></a></li><li title="proxy代理不成功,没有代理到实际地址" data-depth="3"><a href="/docs/faq#proxy代理不成功没有代理到实际地址"><span>proxy代理不成功,没有代理到实际地址</span></a></li><li title="部署" data-depth="2"><a href="/docs/faq#部署"><span>部署</span></a></li><li title="build 后访问路由刷新后 404？" data-depth="3"><a href="/docs/faq#build-后访问路由刷新后-404？"><span>build 后访问路由刷新后 404？</span></a></li><li title="build之后图片丢失？" data-depth="3"><a href="/docs/faq#build之后图片丢失？"><span>build之后图片丢失？</span></a></li><li title="部署在静态文件服务时，如搭配 cordova 使用，页面空白，提示找不到文件？" data-depth="3"><a href="/docs/faq#部署在静态文件服务时，如搭配-cordova-使用，页面空白，提示找不到文件？"><span>部署在静态文件服务时，如搭配 cordova 使用，页面空白，提示找不到文件？</span></a></li><li title="Cannot assign to read only property &#x27;exports&#x27; of object &#x27;#&lt;Object&gt;&#x27;" data-depth="3"><a href="/docs/faq#cannot-assign-to-read-only-property-exports-of-object-object"><span>Cannot assign to read only property &#x27;exports&#x27; of object &#x27;#&lt;Object&gt;&#x27;</span></a></li></ul><div class="__dumi-default-layout-content"><div class="__dumi-default-alert">This article has not been translated yet. Want to help us out? Click the Edit this doc on GitHub at the end of the page.</div><div class="markdown"><h1 id="faq"><a aria-hidden="true" tabindex="-1" href="/docs/faq#faq"><span class="icon icon-link"></span></a>FAQ</h1><h2 id="general"><a aria-hidden="true" tabindex="-1" href="/docs/faq#general"><span class="icon icon-link"></span></a>General</h2><h3 id="umi-3-只能用-typescript-写吗？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#umi-3-只能用-typescript-写吗？"><span class="icon icon-link"></span></a>Umi 3 只能用 TypeScript 写吗？</h3><p>不是。文档中的 <code>.ts</code> 替换为 <code>.js</code> 同样有效，因为不想每次都带上 <code>.(j|t)sx?</code>。</p><h3 id="使用-react-17"><a aria-hidden="true" tabindex="-1" href="/docs/faq#使用-react-17"><span class="icon icon-link"></span></a>使用 React 17</h3><p>在 <code>package.json</code> 中升级 React 依赖</p><div class="__dumi-default-code-block"><pre class="prism-code language-diff"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&quot;dependencies&quot;: {</span></div><div class="token-line"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted">-</span><span class="token deleted-sign deleted line">   &quot;react&quot;: &quot;^16.0.0&quot;,</span></div><div class="token-line"><span class="token deleted-sign deleted line"></span><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line">   &quot;react&quot;: &quot;^17.0.0&quot;,</span></div><div class="token-line"><span class="token inserted-sign inserted line"></span><span class="token deleted-sign deleted prefix deleted">-</span><span class="token deleted-sign deleted line">   &quot;react-dom&quot;: &quot;^16.0.0&quot;,</span></div><div class="token-line"><span class="token deleted-sign deleted line"></span><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line">   &quot;react-dom&quot;: &quot;^17.0.0&quot;,</span></div><div class="token-line"><span class="token inserted-sign inserted line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> },</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> &quot;devDependencies&quot;: {</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line">   &quot;typescript&quot;: &quot;^4.1.0&quot;</span></div><div class="token-line"><span class="token inserted-sign inserted line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> }</span></div></pre></div><p>去掉 <code>import React from &#x27;react&#x27;</code> 模块引入</p><div class="__dumi-default-code-block"><pre class="prism-code language-diff"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token deleted-sign deleted prefix deleted">-</span><span class="token deleted-sign deleted line"> import React from &#x27;react&#x27;;</span></div><div class="token-line"><span class="token deleted-sign deleted line"></span><span class="token plain"></span></div><div class="token-line"><span class="token plain">function App() {</span></div><div class="token-line"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> return &lt;h1&gt;Hello World&lt;/h1&gt;;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token plain">}</span></div></pre></div><p>同时 <code>tsconfig.json</code> 修改 <code>jsx</code> 配置：</p><div class="__dumi-default-code-block"><pre class="prism-code language-diff"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">{</span></div><div class="token-line"><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> &quot;compilerOptions&quot;: {</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;target&quot;: &quot;esnext&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;module&quot;: &quot;esnext&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;moduleResolution&quot;: &quot;node&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;importHelpers&quot;: true,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted">-</span><span class="token deleted-sign deleted line">   &quot;jsx&quot;: &quot;react&quot;,</span></div><div class="token-line"><span class="token deleted-sign deleted line"></span><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line">   &quot;jsx&quot;: &quot;react-jsx&quot;,</span></div><div class="token-line"><span class="token inserted-sign inserted line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;esModuleInterop&quot;: true,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;sourceMap&quot;: true,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;baseUrl&quot;: &quot;./&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;strict&quot;: true,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;paths&quot;: {</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     &quot;@/*&quot;: [&quot;src/*&quot;],</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     &quot;@@/*&quot;: [&quot;src/.umi/*&quot;]</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   },</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;allowSyntheticDefaultImports&quot;: true</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> },</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> &quot;include&quot;: [</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;mock/**/*&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;src/**/*&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;config/**/*&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;.umirc.ts&quot;,</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &quot;typings.d.ts&quot;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> ]</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token plain">}</span></div></pre></div><h3 id="import-from-umi-没有定义怎么办？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#import-from-umi-没有定义怎么办？"><span class="icon icon-link"></span></a>import from umi 没有定义怎么办？</h3><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> history </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span></div></pre></div><p>可能报 <code>xxx has no exported member &#x27;history&#x27;</code>。</p><p>这时需要确保两件事，</p><ol><li>tsconfig.json 中有配置 <code>@@</code> 的路径，比如 <code>&quot;@@/*&quot;: [&quot;src/.umi/*&quot;]</code>，参考 <a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi/blob/master/packages/create-umi-app/templates/AppGenerator/tsconfig.json">tsconfig.json 模板<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>确保 <code>src/.umi/core/umiExports.ts</code> 有相关内容，如果没有，可通过 <code>umi build</code>、<code>umi dev</code> 或 <code>umi g tmp</code> 任一命令生成</li></ol><h3 id="如何动态修改-title-？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#如何动态修改-title-？"><span class="icon icon-link"></span></a>如何动态修改 title ？</h3><p>可以通过 <a href="/plugins/plugin-helmet">plugin-helmet</a> 插件动态修改 title 。</p><h3 id="layout-路由如何传值给子路由"><a aria-hidden="true" tabindex="-1" href="/docs/faq#layout-路由如何传值给子路由"><span class="icon icon-link"></span></a>layout 路由如何传值给子路由</h3><p>推荐用 context 或者数据流方案，如果用 cloneElement 传值需要传两级，因为第一级是 Switch，然后才是 Route。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token plain">children</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token parameter">child</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">cloneElement</span><span class="token punctuation">(</span><span class="token plain">child</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">Children</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token plain">child</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token parameter">child</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">cloneElement</span><span class="token punctuation">(</span><span class="token plain">child</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;test&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre></div><p>参考：</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi/pull/1282#issue-224134432">https://github.com/umijs/umi/pull/1282#issue-224134432<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h2 id="报错"><a aria-hidden="true" tabindex="-1" href="/docs/faq#报错"><span class="icon icon-link"></span></a>报错</h2><h3 id="umi-不是内部或外部命令"><a aria-hidden="true" tabindex="-1" href="/docs/faq#umi-不是内部或外部命令"><span class="icon icon-link"></span></a><code>umi</code> 不是内部或外部命令</h3><p>e.g.</p><img src="https://gw.alipayobjects.com/zos/rmsportal/fatmbcGwSOwDntHjmrtG.png"/><p>需配置 NODE_PATH 环境变量，如使用 yarn，可通过执行 <code>yarn global bin</code> 拿到 bin 路径。</p><h3 id="配了-dynamicimportloading-后外层报错不生效怎么办？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#配了-dynamicimportloading-后外层报错不生效怎么办？"><span class="icon icon-link"></span></a>配了 <code>dynamicImport.loading</code> 后外层报错不生效怎么办？</h3><p>组件报错有两种形式：</p><ol><li></li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 出错</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></div></pre></div><ol start="2"><li></li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 出错</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>第二种不管怎么样都能正常抛错，第一种在开启 dynamicImport 并配置了 loading 时可能会不生效。</p><p>比如 loading 指向的文件内容为：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token plain">loading</span><span class="token spread operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span></div></pre></div><p>那么出错时也会只显示 loading... 。</p><h4 id="解决"><a aria-hidden="true" tabindex="-1" href="/docs/faq#解决"><span class="icon icon-link"></span></a>解决</h4><p>loading 处理出错场景，比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">extends</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">PureComponent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;development&#x27;</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">.</span><span class="token property-access">stack</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">error</span><span class="token punctuation">.</span><span class="token property-access">stack</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain">loading</span><span class="token spread operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h3 id="ie报错和压缩问题解决思路"><a aria-hidden="true" tabindex="-1" href="/docs/faq#ie报错和压缩问题解决思路"><span class="icon icon-link"></span></a>ie报错和压缩问题解决思路</h3><p>感觉现在ie下的错误，都是因为这个问题引起的。</p><h4 id="典型错误"><a aria-hidden="true" tabindex="-1" href="/docs/faq#典型错误"><span class="icon icon-link"></span></a>典型错误</h4><p><img src="https://user-images.githubusercontent.com/11746742/62197556-a37dec00-b3b2-11e9-8f72-999058e9b305.png" alt="image"/></p><h4 id="解决思路"><a aria-hidden="true" tabindex="-1" href="/docs/faq#解决思路"><span class="icon icon-link"></span></a>解决思路</h4><h5 id="第一步、确认你的需求"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第一步、确认你的需求"><span class="icon icon-link"></span></a>第一步、确认你的需求</h5><p>主要是<strong>是否需要兼容旧版本不支持 es6 的浏览器</strong>，</p><ul><li>如果需要兼容，跳到第二步</li><li>如果不需要兼容，配置 <code>minimizer</code> 为 <code>terserjs</code></li></ul><h5 id="第二步"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第二步"><span class="icon icon-link"></span></a>第二步</h5><p>检查 <code>targets</code> 配置，确认是否有包含旧版本浏览器比如，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  targets</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> ie</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>尝试构建，如果没有问题，则不用再执行下一步。</p><h5 id="第三步、记录错误文件和行号"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第三步、记录错误文件和行号"><span class="icon icon-link"></span></a>第三步、记录错误文件和行号</h5><p>比如前面的，</p><ul><li>文件：vendors.async.js</li><li>行号：193</li><li>出错 token：<code>&gt;</code></li></ul><h5 id="第四步、不压缩构建，查找出错源"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第四步、不压缩构建，查找出错源"><span class="icon icon-link"></span></a>第四步、不压缩构建，查找出错源</h5><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment"># 如果你用 umi</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token assign-left variable">COMPRESS</span><span class="token operator">=</span><span class="token plain">none umi build</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment"># 如果你用 bigfish</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ </span><span class="token assign-left variable">COMPRESS</span><span class="token operator">=</span><span class="token plain">none bigfish build</span></div></pre></div><p>找 <code>vendors.async.js</code> 的 193 行，看下是哪个包出错的，记录包名和版本号。</p><h5 id="第五步、修改本地node_moduleses5-imcompatible-versionspackagejson-文件，写入刚刚出错的包名和版本号。"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第五步、修改本地node_moduleses5-imcompatible-versionspackagejson-文件，写入刚刚出错的包名和版本号。"><span class="icon icon-link"></span></a>第五步、修改本地<code>node_modules/es5-imcompatible-versions/package.json</code> 文件，写入刚刚出错的包名和版本号。</h5><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token string">&quot;antd-table-infinity&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token string">&quot;^1.1.2&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">&quot;version&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;^1.1.2&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">&quot;reason&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;https://github.com/Leonard-Li777/antd-table-infinity/blob/master/src/components/Table/InfinityTable/index.jsx#L7&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span></div></pre></div><h5 id="第六步、保存文件，重新build，确认错误已修复"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第六步、保存文件，重新build，确认错误已修复"><span class="icon icon-link"></span></a>第六步、保存文件，重新build，确认错误已修复</h5><h5 id="第七步、给-es5-imcompatible-versions-提-pr"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第七步、给-es5-imcompatible-versions-提-pr"><span class="icon icon-link"></span></a>第七步、给 <a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/es5-imcompatible-versions">es5-imcompatible-versions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 提 PR</h5><h6 id="不会提交pr的同学，请按下面步骤操作"><a aria-hidden="true" tabindex="-1" href="/docs/faq#不会提交pr的同学，请按下面步骤操作"><span class="icon icon-link"></span></a>不会提交PR的同学，请按下面步骤操作</h6><p>1、在<a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/es5-imcompatible-versions/edit/master/package.json">编辑<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>里面，把你刚才的修改，在这里也修改一下。 2、修改完，页面拉到最下方。创建一个分支（可能会是自动创建分支的情况，如果没得选择，这里不理会就好）点击绿色按钮 <code>Propose file change</code><img src="https://user-images.githubusercontent.com/11746742/62198380-189df100-b3b4-11e9-8684-8e5fc9d2e929.png" alt="image"/>3、在跳转后的页面，点击绿色按钮 <code>Create pull request</code><img src="https://user-images.githubusercontent.com/11746742/62198516-5ac73280-b3b4-11e9-9130-aaee6defdb03.png" alt="image"/></p><h5 id="第八步、将跳转后的链接，发到群里面。等待合并"><a aria-hidden="true" tabindex="-1" href="/docs/faq#第八步、将跳转后的链接，发到群里面。等待合并"><span class="icon icon-link"></span></a>第八步、将跳转后的链接，发到群里面。等待合并</h5><p>如：<code> https://github.com/umijs/es5-imcompatible-versions/pull/36</code></p><h4 id="参考"><a aria-hidden="true" tabindex="-1" href="/docs/faq#参考"><span class="icon icon-link"></span></a>参考</h4><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/sorrycc/blog/issues/68">https://github.com/sorrycc/blog/issues/68<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/es5-imcompatible-versions">https://github.com/umijs/es5-imcompatible-versions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h3 id="the-dependency-was-not-found"><a aria-hidden="true" tabindex="-1" href="/docs/faq#the-dependency-was-not-found"><span class="icon icon-link"></span></a>The dependency was not found</h3><p><img src="https://user-images.githubusercontent.com/11746742/87644864-49229a80-c77f-11ea-909d-8e3d2bb5d7c2.png" alt="The dependency was not found"/></p><p>一般是网络不好装包错误导致的，可以删除 <code>*.lock</code> 和 <code>node_modules</code> 重新执行 <code>yarn</code>，如果多次尝试都无法解决。可以在项目目录下执行 <code>git clean -dfx</code>，再重装，一般可以解决。</p><p>如果同一个项目你同事可以运行，你运行出错。一般都是缓存或者安装包过程出错问题。可以尝试删除几个缓存目录，比如删除 <code>src/.umi/cache</code> 后重试。</p><h2 id="webpack"><a aria-hidden="true" tabindex="-1" href="/docs/faq#webpack"><span class="icon icon-link"></span></a>webpack</h2><h3 id="如何配置额外的-loader-"><a aria-hidden="true" tabindex="-1" href="/docs/faq#如何配置额外的-loader-"><span class="icon icon-link"></span></a>如何配置额外的 loader ?</h3><p>比如 svg 我希望不走 base64，而是全部产生 svg 文件，可以这样配：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 添加 url-loader 的 exclude</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  urlLoaderExcludes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">.svg$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 添加 loader</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    config</span><span class="token punctuation">.</span><span class="token property-access">module</span><span class="token punctuation">.</span><span class="token method function property-access">rule</span><span class="token punctuation">(</span><span class="token string">&#x27;svg-with-file&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">.svg$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token string">&#x27;svg-with-file-loader&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">.</span><span class="token method function property-access">loader</span><span class="token punctuation">(</span><span class="token string">&#x27;file-loader&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="css"><a aria-hidden="true" tabindex="-1" href="/docs/faq#css"><span class="icon icon-link"></span></a>CSS</h2><h3 id="为啥我-import-的-css-文件不生效？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#为啥我-import-的-css-文件不生效？"><span class="icon icon-link"></span></a>为啥我 import 的 css 文件不生效？</h3><p>umi 默认是开启 css modules 的，请按照 css modules 的方式进行书写。</p><p>参考：</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/css-modules/css-modules">css-modules/css-modules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="http://www.ruanyifeng.com/blog/2016/06/css_modules.html">CSS Modules 用法教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h3 id="如何禁用-css-modules-？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#如何禁用-css-modules-？"><span class="icon icon-link"></span></a>如何禁用 css modules ？</h3><p>修改 <code>.umirc.js</code>:</p><div class="__dumi-default-code-block"><pre class="prism-code language-json"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token property">&quot;disableCSSModules&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>但没有特殊的理由时，不建议关闭 css modules。</p><h3 id="如何使用-sass-？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#如何使用-sass-？"><span class="icon icon-link"></span></a>如何使用 sass ？</h3><p>先安装额外的依赖，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">$ </span><span class="token function">npm</span><span class="token plain"> i node-sass sass-loader --save</span></div></pre></div><p>然后修改 <code>.umirc.js</code>:</p><div class="__dumi-default-code-block"><pre class="prism-code language-json"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token property">&quot;sass&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h4 id="开启按需加载后如何把-css-打包成一个文件？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#开启按需加载后如何把-css-打包成一个文件？"><span class="icon icon-link"></span></a>开启按需加载后如何把 css 打包成一个文件？</h4><p>配置 splitChunks，比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  dynamicImport</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    config</span><span class="token punctuation">.</span><span class="token property-access">optimization</span><span class="token punctuation">.</span><span class="token method function property-access">splitChunks</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      cacheGroups</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        styles</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;styles&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.(css|less)$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          chunks</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;async&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          minChunks</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          minSize</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>打包后会输出：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">File sizes after gzip:</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  126.85 KB  dist/umi.js</span></div><div class="token-line"><span class="token plain">  535 B      dist/p__users.async.js</span></div><div class="token-line"><span class="token plain">  533 B      dist/p__index.async.js</span></div><div class="token-line"><span class="token plain">  337 B      dist/styles.async.js</span></div><div class="token-line"><span class="token plain">  96 B       dist/styles.chunk.css</span></div></pre></div><p>示例：</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi/files/2556654/sorrycc-123.zip">sorrycc-123.zip<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>参考：</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/webpack-contrib/mini-css-extract-plugin#extracting-all-css-in-a-single-file">https://github.com/webpack-contrib/mini-css-extract-plugin#extracting-all-css-in-a-single-file<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi/blob/master/packages/umi-plugin-react/test/chunks/.umirc.js#L1">https://github.com/umijs/umi/blob/master/packages/umi-plugin-react/test/chunks/.umirc.js#L1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h3 id="如何禁用掉每次刷新路由时出现的-loading-状态？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#如何禁用掉每次刷新路由时出现的-loading-状态？"><span class="icon icon-link"></span></a>如何禁用掉每次刷新路由时出现的 loading... 状态？</h3><p>给 dynamicImport 引入一个空组件比如 <code>Loading.tsx</code> ，内容如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// components/Loading.tsx</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-typescript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  dynamicImport</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    loading</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/components/Loading&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="test"><a aria-hidden="true" tabindex="-1" href="/docs/faq#test"><span class="icon icon-link"></span></a>Test</h2><h3 id="如何断点调试"><a aria-hidden="true" tabindex="-1" href="/docs/faq#如何断点调试"><span class="icon icon-link"></span></a>如何断点调试</h3><p>确保 node 在 8.10 以上，然后执行：</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">$ node --inspect-brk ./node_modules/.bin/umi </span><span class="token builtin class-name">test</span></div></pre></div><p>然后在浏览器里打开 chrome://inspect/#devices 进行 inspect 和断点。</p><h2 id="请求"><a aria-hidden="true" tabindex="-1" href="/docs/faq#请求"><span class="icon icon-link"></span></a>请求</h2><h3 id="proxy代理不成功没有代理到实际地址"><a aria-hidden="true" tabindex="-1" href="/docs/faq#proxy代理不成功没有代理到实际地址"><span class="icon icon-link"></span></a>proxy代理不成功,没有代理到实际地址</h3><p><img src="https://user-images.githubusercontent.com/22974879/48049412-8debe500-e1d9-11e8-8f36-0c3aa89c50b0.png" alt="image"/></p><p>代理只是服务请求代理，这个地址是不会变的。 原理可以简单的理解为，在本地启了一个服务，你先请求了本地的服务，本地的服务转发了你的请求到实际服务器。所以你在浏览器上看到的请求地址还是<a target="_blank" rel="noopener noreferrer" href="http://localhost:8000/xxx">http://localhost:8000/xxx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 。以服务端是否收到请求为准</p><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/ant-design/ant-design-pro/issues/2779">https://github.com/ant-design/ant-design-pro/issues/2779<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h2 id="部署"><a aria-hidden="true" tabindex="-1" href="/docs/faq#部署"><span class="icon icon-link"></span></a>部署</h2><h3 id="build-后访问路由刷新后-404？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#build-后访问路由刷新后-404？"><span class="icon icon-link"></span></a>build 后访问路由刷新后 404？</h3><p>几个方案供选择：</p><ul><li>改用 hashHistory，在 <code>.umirc.js</code> 里配 <code>history: &#x27;hash&#x27;</code></li><li>静态化，在 <code>.umirc.js</code> 里配 <code>exportStatic: true</code></li><li>服务端配置路由 fallback 到 index.html</li></ul><h3 id="build之后图片丢失？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#build之后图片丢失？"><span class="icon icon-link"></span></a>build之后图片丢失？</h3><p>可能是图片没有正确引用，可以参考一下代码，正确引入图片。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports">logo</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;./logo.png&#x27;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 告诉WebPACK这个JS文件使用这个图像</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">logo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// logo.84287d09.png</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 导入图片</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">img src</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">logo</span><span class="token punctuation">}</span><span class="token plain"> alt</span><span class="token operator">=</span><span class="token string">&quot;Logo&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span><span class="token punctuation">;</span></div></pre></div><p>在css中使用，注意不要使用绝对路径</p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token selector class">.Logo</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">background-image</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token url function">url</span><span class="token url punctuation">(</span><span class="token url">./logo.png</span><span class="token url punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><blockquote><p>注意：图片大小小于 10 k 时会走 base64。即不会被拷贝到 public 文件夹下，而是以 base64 的资源存在。</p></blockquote><h3 id="部署在静态文件服务时，如搭配-cordova-使用，页面空白，提示找不到文件？"><a aria-hidden="true" tabindex="-1" href="/docs/faq#部署在静态文件服务时，如搭配-cordova-使用，页面空白，提示找不到文件？"><span class="icon icon-link"></span></a>部署在静态文件服务时，如搭配 cordova 使用，页面空白，提示找不到文件？</h3><p>可以尝试配置 <code>publicPath: &#x27;./&#x27;,</code></p><h3 id="cannot-assign-to-read-only-property-exports-of-object-object"><a aria-hidden="true" tabindex="-1" href="/docs/faq#cannot-assign-to-read-only-property-exports-of-object-object"><span class="icon icon-link"></span></a>Cannot assign to read only property &#x27;exports&#x27; of object &#x27;#&lt;Object&gt;&#x27;</h3><p>出现这个报错，一般是在一个文件里混用了 <code>import</code> 和 <code>module.exports</code></p><p>推荐统一改成 ES Module 标准导入、导出形式：</p><div class="__dumi-default-code-block"><pre class="prism-code language-diff"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">import { A } from &#x27;./a&#x27;;</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token deleted-sign deleted prefix deleted">-</span><span class="token deleted-sign deleted line"> module.exports = A;</span></div><div class="token-line"><span class="token deleted-sign deleted line"></span><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line"> export default A;</span></div></pre></div><p>如果需要改动的文件比较多，可以 <code>npm i @babel/plugin-transform-modules-commonjs -D</code>，然后在 umi 配置文件中加上 <code>extraBabelPlugins: [&#x27;@babel/plugin-transform-modules-commonjs&#x27;]</code>。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi/edit/master/docs/docs/faq.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last update: ">12/4/2020 09:13:04</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/umi.js"></script>
  </body>
</html>
