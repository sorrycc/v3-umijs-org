<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg"
    />
    <link rel="stylesheet" href="/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.5.26
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.includes(e) ? e : r[0]
        );
      })();
    </script>
    <title>Config</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/config" data-show-sidemenu="true" data-show-slugs="false" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="/">UmiJS</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/docs">Docs</a></span><span><a aria-current="page" class="active" href="/config">Config</a></span><span><a href="/api">API</a></span><span><a href="/guide">Guide</a></span><span><a href="/plugins">Plugins</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://v2.umijs.org">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><div class="__dumi-default-locale-select" data-locale-count="2"><a href="/zh-CN/config">中文</a></div><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="/"></a><h1>UmiJS</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/docs">Docs</a></li><li><a aria-current="page" class="active" href="/config">Config</a></li><li><a href="/api">API</a></li><li><a href="/guide">Guide</a></li><li><a href="/plugins">Plugins</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://v2.umijs.org">v2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><a href="/zh-CN/config">中文</a></div><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/config">Config</a><ul role="slug-list"><li title="404" data-depth="2"><a href="/config#404"><span>404</span></a></li><li title="alias" data-depth="2"><a href="/config#alias"><span>alias</span></a></li><li title="analyze" data-depth="2"><a href="/config#analyze"><span>analyze</span></a></li><li title="autoprefixer" data-depth="2"><a href="/config#autoprefixer"><span>autoprefixer</span></a></li><li title="base" data-depth="2"><a href="/config#base"><span>base</span></a></li><li title="chainWebpack" data-depth="2"><a href="/config#chainwebpack"><span>chainWebpack</span></a></li><li title="chunks" data-depth="2"><a href="/config#chunks"><span>chunks</span></a></li><li title="cssLoader" data-depth="2"><a href="/config#cssloader"><span>cssLoader</span></a></li><li title="cssModulesTypescriptLoader " data-depth="2"><a href="/config#cssmodulestypescriptloader"><span>cssModulesTypescriptLoader </span></a></li><li title="cssnano" data-depth="2"><a href="/config#cssnano"><span>cssnano</span></a></li><li title="copy" data-depth="2"><a href="/config#copy"><span>copy</span></a></li><li title="define" data-depth="2"><a href="/config#define"><span>define</span></a></li><li title="devServer" data-depth="2"><a href="/config#devserver"><span>devServer</span></a></li><li title="devtool" data-depth="2"><a href="/config#devtool"><span>devtool</span></a></li><li title="dynamicImport" data-depth="2"><a href="/config#dynamicimport"><span>dynamicImport</span></a></li><li title="dynamicImportSyntax" data-depth="2"><a href="/config#dynamicimportsyntax"><span>dynamicImportSyntax</span></a></li><li title="exportStatic" data-depth="2"><a href="/config#exportstatic"><span>exportStatic</span></a></li><li title="externals" data-depth="2"><a href="/config#externals"><span>externals</span></a></li><li title="extraBabelIncludes" data-depth="2"><a href="/config#extrababelincludes"><span>extraBabelIncludes</span></a></li><li title="extraBabelPlugins" data-depth="2"><a href="/config#extrababelplugins"><span>extraBabelPlugins</span></a></li><li title="extraBabelPresets" data-depth="2"><a href="/config#extrababelpresets"><span>extraBabelPresets</span></a></li><li title="extraPostCSSPlugins" data-depth="2"><a href="/config#extrapostcssplugins"><span>extraPostCSSPlugins</span></a></li><li title="favicon" data-depth="2"><a href="/config#favicon"><span>favicon</span></a></li><li title="forkTSChecker" data-depth="2"><a href="/config#forktschecker"><span>forkTSChecker</span></a></li><li title="fastRefresh " data-depth="2"><a href="/config#fastrefresh"><span>fastRefresh </span></a></li><li title="hash" data-depth="2"><a href="/config#hash"><span>hash</span></a></li><li title="headScripts" data-depth="2"><a href="/config#headscripts"><span>headScripts</span></a></li><li title="history" data-depth="2"><a href="/config#history"><span>history</span></a></li><li title="ignoreMomentLocale" data-depth="2"><a href="/config#ignoremomentlocale"><span>ignoreMomentLocale</span></a></li><li title="inlineLimit" data-depth="2"><a href="/config#inlinelimit"><span>inlineLimit</span></a></li><li title="lessLoader" data-depth="2"><a href="/config#lessloader"><span>lessLoader</span></a></li><li title="links" data-depth="2"><a href="/config#links"><span>links</span></a></li><li title="manifest" data-depth="2"><a href="/config#manifest"><span>manifest</span></a></li><li title="metas" data-depth="2"><a href="/config#metas"><span>metas</span></a></li><li title="mfsu " data-depth="2"><a href="/config#mfsu"><span>mfsu </span></a></li><li title="mock" data-depth="2"><a href="/config#mock"><span>mock</span></a></li><li title="mountElementId" data-depth="2"><a href="/config#mountelementid"><span>mountElementId</span></a></li><li title="mpa " data-depth="2"><a href="/config#mpa"><span>mpa </span></a></li><li title="nodeModulesTransform " data-depth="2"><a href="/config#nodemodulestransform"><span>nodeModulesTransform </span></a></li><li title="outputPath" data-depth="2"><a href="/config#outputpath"><span>outputPath</span></a></li><li title="plugins" data-depth="2"><a href="/config#plugins"><span>plugins</span></a></li><li title="polyfill" data-depth="2"><a href="/config#polyfill"><span>polyfill</span></a></li><li title="postcssLoader" data-depth="2"><a href="/config#postcssloader"><span>postcssLoader</span></a></li><li title="presets" data-depth="2"><a href="/config#presets"><span>presets</span></a></li><li title="proxy" data-depth="2"><a href="/config#proxy"><span>proxy</span></a></li><li title="publicPath" data-depth="2"><a href="/config#publicpath"><span>publicPath</span></a></li><li title="routes" data-depth="2"><a href="/config#routes"><span>routes</span></a></li><li title="runtimeHistory" data-depth="2"><a href="/config#runtimehistory"><span>runtimeHistory</span></a></li><li title="runtimePublicPath" data-depth="2"><a href="/config#runtimepublicpath"><span>runtimePublicPath</span></a></li><li title="ssr " data-depth="2"><a href="/config#ssr"><span>ssr </span></a></li><li title="scripts" data-depth="2"><a href="/config#scripts"><span>scripts</span></a></li><li title="singular" data-depth="2"><a href="/config#singular"><span>singular</span></a></li><li title="styleLoader" data-depth="2"><a href="/config#styleloader"><span>styleLoader</span></a></li><li title="styles" data-depth="2"><a href="/config#styles"><span>styles</span></a></li><li title="targets" data-depth="2"><a href="/config#targets"><span>targets</span></a></li><li title="terserOptions" data-depth="2"><a href="/config#terseroptions"><span>terserOptions</span></a></li><li title="theme" data-depth="2"><a href="/config#theme"><span>theme</span></a></li><li title="title" data-depth="2"><a href="/config#title"><span>title</span></a></li><li title="webpack5 " data-depth="2"><a href="/config#webpack5"><span>webpack5 </span></a></li><li title="workerLoader " data-depth="2"><a href="/config#workerloader"><span>workerLoader </span></a></li></ul></li></ul></div></div><div class="__dumi-default-layout-content"><div class="__dumi-default-alert">This article has not been translated yet. Want to help us out? Click the Edit this doc on GitHub at the end of the page.</div><div class="markdown"><h1 id="config"><a aria-hidden="true" tabindex="-1" href="/config#config"><span class="icon icon-link"></span></a>Config</h1><p>以下配置项通过字母排序。</p><h2 id="404"><a aria-hidden="true" tabindex="-1" href="/config#404"><span class="icon icon-link"></span></a>404</h2><ul><li>Type: <code>boolean</code></li><li>Default: <code>true</code></li></ul><p>约定式路由中 404 页面的生效规则，可通过设置为 false 关闭。</p><h2 id="alias"><a aria-hidden="true" tabindex="-1" href="/config#alias"><span class="icon icon-link"></span></a>alias</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>配置别名，对引用路径进行映射。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  alias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    foo</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/tmp/a/b/foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>然后 <code>import(&#x27;foo&#x27;)</code>，实际上是 <code>import(&#x27;/tmp/a/b/foo&#x27;)</code>。</p><p>Umi 内置了以下别名：</p><ul><li><code>@</code>，项目 src 目录</li><li><code>@@</code>，临时目录，通常是 <code>src/.umi</code> 目录</li><li><code>umi</code>，当前所运行的 umi 仓库目录</li><li><code>react-router</code> 和 <code>react-router-dom</code>，底层路由库，锁定版本，打包时所有依赖了他们的地方使用同一个版本</li><li><code>react</code> 和 <code>react-dom</code>，默认使用 <code>16.x</code> 版本，但如果项目里有依赖，会优先使用项目中依赖的版本</li></ul><h2 id="analyze"><a aria-hidden="true" tabindex="-1" href="/config#analyze"><span class="icon icon-link"></span></a>analyze</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>包模块结构分析工具，可以看到项目各模块的大小，按需优化。通过 <code>ANALYZE=1 umi build</code> 或 <code>ANALYZE=1 umi dev</code> 开启，默认 server 端口号为 <code>8888</code>，更多配置如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 配置具体含义见：https://github.com/umijs/umi-webpack-bundle-analyzer#options-for-plugin</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  analyze</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    analyzerMode</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;server&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    analyzerPort</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">8888</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    openAnalyzer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// generate stats file while ANALYZE_DUMP exist</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    generateStatsFile</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    statsFilename</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;stats.json&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    logLevel</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;info&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    defaultSizes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;parsed&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// stat  // gzip</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="autoprefixer"><a aria-hidden="true" tabindex="-1" href="/config#autoprefixer"><span class="icon icon-link"></span></a>autoprefixer</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- --> flexbox: &#x27;no-2009&#x27; <!-- -->}</code></li></ul><p>设置 <a target="_blank" rel="noopener noreferrer" href="https://github.com/postcss/autoprefixer#options">autoprefixer 的配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>注意：</p><ul><li>不要设置 <code>overrideBrowserslist</code>，此配置被内部接管，通过 <code>targets</code> 配置项选择你要兼容的浏览器。</li></ul><h2 id="base"><a aria-hidden="true" tabindex="-1" href="/config#base"><span class="icon icon-link"></span></a>base</h2><ul><li>Type: <code>string</code></li><li>Default: <code>/</code></li></ul><p>设置路由前缀，通常用于部署到非根目录。</p><p>比如，你有路由 <code>/</code> 和 <code>/users</code>，然后设置了 base 为 <code>/foo/</code>，那么就可以通过 <code>/foo/</code> 和 <code>/foo/users</code> 访问到之前的路由。</p><h2 id="chainwebpack"><a aria-hidden="true" tabindex="-1" href="/config#chainwebpack"><span class="icon icon-link"></span></a>chainWebpack</h2><ul><li>Type: <code>Function</code></li></ul><p>通过 <a target="_blank" rel="noopener noreferrer" href="https://github.com/mozilla-neutrino/webpack-chain">webpack-chain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的 API 修改 webpack 配置。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">memo</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> env</span><span class="token parameter punctuation">,</span><span class="token parameter"> webpack</span><span class="token parameter punctuation">,</span><span class="token parameter"> createCSSRule </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 设置 alias</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token property-access">resolve</span><span class="token punctuation">.</span><span class="token property-access">alias</span><span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;/tmp/a/b/foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 删除 umi 内置插件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token property-access">plugins</span><span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span><span class="token string">&#x27;progress&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token property-access">plugins</span><span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span><span class="token string">&#x27;friendly-error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token property-access">plugins</span><span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span><span class="token string">&#x27;copy&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>支持异步，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">memo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token property-access">resolve</span><span class="token punctuation">.</span><span class="token property-access">alias</span><span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;/tmp/a/b/foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>SSR 时，修改服务端构建配置</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BundlerConfigType</span><span class="token imports"> </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">memo</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> type </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 对 ssr bundler config 的修改</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">type </span><span class="token operator">===</span><span class="token plain"> </span><span class="token maybe-class-name">BundlerConfigType</span><span class="token punctuation">.</span><span class="token property-access">ssr</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// 服务端渲染构建扩展</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 对 csr bundler config 的修改</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">type </span><span class="token operator">===</span><span class="token plain"> </span><span class="token maybe-class-name">BundlerConfigType</span><span class="token punctuation">.</span><span class="token property-access">csr</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// 客户端渲染构建扩展</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// ssr 和 csr 都扩展</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>参数有：</p><ul><li>memo，当前 webpack-chain 对象</li><li>env，当前环境，<code>development</code>、<code>production</code> 或 <code>test</code> 等</li><li>webpack，webpack 实例，用于获取其内部插件</li><li>createCSSRule，用于扩展其他 CSS 实现，比如 sass, stylus</li><li>type，当前 webpack 实例类型，默认走 csr，如果开启 ssr，会有 ssr 的 webpack 实例</li></ul><h2 id="chunks"><a aria-hidden="true" tabindex="-1" href="/config#chunks"><span class="icon icon-link"></span></a>chunks</h2><p>默认是 <code>[&#x27;umi&#x27;]</code>，可修改，比如做了 vendors 依赖提取之后，会需要在 <code>umi.js</code> 之前加载 <code>vendors.js</code>。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  chunks</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;vendors&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">chainWebpack</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> webpack </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    config</span><span class="token punctuation">.</span><span class="token method function property-access">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      optimization</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        splitChunks</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          chunks</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;all&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          minSize</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">30000</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          minChunks</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          automaticNameDelimiter</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;.&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          cacheGroups</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            vendor</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;vendors&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> resource </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span><span class="token plain">resource</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              priority</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="cssloader"><a aria-hidden="true" tabindex="-1" href="/config#cssloader"><span class="icon icon-link"></span></a>cssLoader</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>设置 <a target="_blank" rel="noopener noreferrer" href="https://github.com/webpack-contrib/css-loader#options">css-loader 配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>若希望将 ClassName 类名变成驼峰命名形式，可配置：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  cssLoader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    localsConvention</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;camelCase&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>则以下写法将自动转成驼峰命名：</p><div class="__dumi-default-code-block"><pre class="prism-code language-tsx"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> styles </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;./index.less&#x27;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// .bar-foo { font-size: 16px; }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">className</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">styles</span><span class="token tag script language-javascript punctuation">.</span><span class="token tag script language-javascript">barFoo</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token maybe-class-name">Hello</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// =&gt; &lt;div class=&quot;bar-foo___{hash}&quot;&gt;Hello&lt;/div&gt;</span></div></pre></div><h2 id="cssmodulestypescriptloader"><a aria-hidden="true" tabindex="-1" href="/config#cssmodulestypescriptloader"><span class="icon icon-link"></span></a>cssModulesTypescriptLoader <span class="__dumi-default-badge">3.1+</span></h2><ul><li>type: <code>{<!-- --> mode: &#x27;verify&#x27; | &#x27;emit&#x27; <!-- -->}</code></li><li>Default: <code>undefined</code></li></ul><p>对按照 css modules 方式引入的 css 或 less 等样式文件，自动生成 ts 类型定义文件。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  cssModulesTypescriptLoader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>等同于以下配置，<code>mode</code> 默认为 <code>emit</code>，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  cssModulesTypescriptLoader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    mode</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;emit&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="cssnano"><a aria-hidden="true" tabindex="-1" href="/config#cssnano"><span class="icon icon-link"></span></a>cssnano</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- --> mergeRules: false, minifyFontValues: <!-- -->{<!-- --> removeQuotes: false <!-- -->}<!-- --> <!-- -->}</code></li></ul><p>设置 <a target="_blank" rel="noopener noreferrer" href="https://cssnano.co/docs/optimisations/">cssnano 配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，基于 default 的配置集合。</p><p>比如：<code>.box <!-- -->{<!-- --> background: url(&quot;./css/../img/cat.jpg&quot;); <!-- -->}</code> 默认会被压缩成 <code>.box <!-- -->{<!-- --> background: url(img/cat.jpg); <!-- -->}</code> ，如果不想要这个特性，可以设置，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  cssnano</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    normalizeUrl</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="copy"><a aria-hidden="true" tabindex="-1" href="/config#copy"><span class="icon icon-link"></span></a>copy</h2><ul><li>Type: <code>Array(string|<!-- -->{<!-- -->from:string,to:string<!-- -->}<!-- -->)</code></li><li>Default: <code>[]</code></li></ul><p>设置要复制到输出目录的文件或文件夹。</p><p>比如你的目录结构如下，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">+</span><span class="token plain">src </span><span class="token operator">-</span><span class="token plain"> index</span><span class="token punctuation">.</span><span class="token property-access">ts</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> bar </span><span class="token operator">-</span><span class="token plain"> bar</span><span class="token punctuation">.</span><span class="token property-access">js</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> foo</span><span class="token punctuation">.</span><span class="token property-access">js</span><span class="token punctuation">;</span></div></pre></div><p>然后设置，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  copy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;foo.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;bar&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>编译完成后，会额外输出以下文件，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">+</span><span class="token plain">dist </span><span class="token operator">+</span><span class="token plain"> bar </span><span class="token operator">-</span><span class="token plain"> bar</span><span class="token punctuation">.</span><span class="token property-access">js</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> foo</span><span class="token punctuation">.</span><span class="token property-access">js</span><span class="token punctuation">;</span></div></pre></div><p>支持配置 from-to， 需要注意的是 from 是相对于 cwd 的路径，to 是相对于输出路径的路径。</p><p>比如你的目录结构如下，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">+</span><span class="token plain">src </span><span class="token operator">-</span><span class="token plain"> index</span><span class="token punctuation">.</span><span class="token property-access">ts</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> bar </span><span class="token operator">-</span><span class="token plain"> bar</span><span class="token punctuation">.</span><span class="token property-access">js</span><span class="token punctuation">;</span></div></pre></div><p>然后设置，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  copy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword module">from</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;bar/bar.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      to</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;some/bar.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>编译完成后，会额外输出以下文件，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">+</span><span class="token plain">dist </span><span class="token operator">+</span><span class="token plain"> some </span><span class="token operator">-</span><span class="token plain"> bar</span><span class="token punctuation">.</span><span class="token property-access">js</span><span class="token punctuation">;</span></div></pre></div><h2 id="define"><a aria-hidden="true" tabindex="-1" href="/config#define"><span class="icon icon-link"></span></a>define</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>用于提供给代码中可用的变量。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  define</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token constant">FOO</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;bar&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>然后你写 <code>console.log(hello, FOO);</code> 会被编译成 <code>console.log(hello, &#x27;bar&#x27;)</code>。</p><p>注意：</p><ul><li>define 对象的属性值会经过一次 JSON.stringify 转换</li></ul><p>内置的 define 属性，</p><ul><li>process.env.NODE_ENV，值为 <code>development</code> 或 <code>production</code></li></ul><p>如果你有一些不想在生成环境运行的代码，比如断言判断，可以这样，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;development&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token plain">foo </span><span class="token operator">===</span><span class="token plain"> bar</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;foo is not equal to bar&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>dev 时正常运行，build 后会变成为，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token plain">foo </span><span class="token operator">===</span><span class="token plain"> bar</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;foo is not equal to bar&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>进而被压缩掉，不输出在生成环境的代码中。</p><h2 id="devserver"><a aria-hidden="true" tabindex="-1" href="/config#devserver"><span class="icon icon-link"></span></a>devServer</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>配置开发服务器。</p><p>包含以下子配置项：</p><ul><li>port，端口号，默认 <code>8000</code></li><li>host，默认 <code>0.0.0.0</code></li><li>https，是否启用 https server，同时也会开启 HTTP/2</li><li>writeToDisk，生成 <code>assets</code> 到文件系统</li></ul><p>启用 port 和 host 也可以通过环境变量 PORT 和 HOST 临时指定。</p><h2 id="devtool"><a aria-hidden="true" tabindex="-1" href="/config#devtool"><span class="icon icon-link"></span></a>devtool</h2><ul><li>Type: <code>string</code></li><li>Default: <code>cheap-module-source-map</code> in dev, <code>false</code> in build</li></ul><p>用户配置 sourcemap 类型。</p><p>常见的可选类型有：</p><ul><li>eval，最快的类型，但不支持低版本浏览器，如果编译慢，可以试试</li><li>source-map，最慢最全的类型</li></ul><p>更多类型详见 <a target="_blank" rel="noopener noreferrer" href="https://webpack.js.org/configuration/devtool/#devtool">webpack#devtool 配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><h2 id="dynamicimport"><a aria-hidden="true" tabindex="-1" href="/config#dynamicimport"><span class="icon icon-link"></span></a>dynamicImport</h2><ul><li>Type: <code>object</code></li><li>Default: <code>false</code></li></ul><p>是否启用按需加载，即是否把构建产物进行拆分，在需要的时候下载额外的 JS 再执行。</p><p>默认关闭时，只生成一个 js 和一个 css，即 <code>umi.js</code> 和 <code>umi.css</code>。优点是省心，部署方便；缺点是对用户来说初次打开网站会比较慢。</p><p>打包后通常是这样的，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">+ dist</span></div><div class="token-line"><span class="token plain">  - umi.js</span></div><div class="token-line"><span class="token plain">  - umi.css</span></div><div class="token-line"><span class="token plain">  - index.html</span></div></pre></div><p>启用之后，需要考虑 publicPath 的配置，可能还需要考虑 runtimePublicPath，因为需要知道从哪里异步加载 JS、CSS 和图片等资源。</p><p>打包后通常是这样，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">+ dist</span></div><div class="token-line"><span class="token plain">  - umi.js</span></div><div class="token-line"><span class="token plain">  - umi.css</span></div><div class="token-line"><span class="token plain">  - index.html</span></div><div class="token-line"><span class="token plain">  - p__index.js</span></div><div class="token-line"><span class="token plain">  - p__users__index.js</span></div></pre></div><p>这里的 <code>p__users_index.js</code> 是路由组件所在路径 <code>src/pages/users/index</code>，其中 <code>src</code> 会被忽略，<code>pages</code> 被替换为 <code>p</code>。</p><p>包含以下子配置项，</p><ul><li>loading, 类型为字符串，指向 loading 组件文件</li></ul><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  dynamicImport</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    loading</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/Loading&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>然后在 src 目录下新建 <code>Loading.tsx</code>，</p><div class="__dumi-default-code-block"><pre class="prism-code language-jsx"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> React </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain">加载中</span><span class="token operator">...</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>构建之后使用低网络模拟就能看到效果。</p><h2 id="dynamicimportsyntax"><a aria-hidden="true" tabindex="-1" href="/config#dynamicimportsyntax"><span class="icon icon-link"></span></a>dynamicImportSyntax</h2><ul><li>Type: <code>object</code></li><li>Default: <code>false</code></li></ul><p>如果你不需要路由按需加载，只需要支持 <code>import()</code> 语法的 code splitting，可使用此配置。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  dynamicImportSyntax</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="exportstatic"><a aria-hidden="true" tabindex="-1" href="/config#exportstatic"><span class="icon icon-link"></span></a>exportStatic</h2><ul><li>Type: <code>object</code></li></ul><p>配置 html 的输出形式，默认只输出 <code>index.html</code>。</p><p>如果需要预渲染，请开启 <a href="/config#ssr-32">ssr</a> 配置，常用来解决没有服务端情况下，页面的 SEO 和首屏渲染提速。</p><p>如果开启 <code>exportStatic</code>，则会针对每个路由输出 html 文件。</p><p>包含以下几个属性：</p><ul><li>htmlSuffix，启用 <code>.html</code> 后缀。</li><li>dynamicRoot，部署到任意路径。</li><li>extraRoutePaths，生成额外的路径页面，用法和场景见 <a href="/zh-CN/docs/ssr#%E9%A2%84%E6%B8%B2%E6%9F%93%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1">预渲染动态路由</a></li></ul><p>比如以下路由，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">/</span></div><div class="token-line"><span class="token plain">/users</span></div><div class="token-line"><span class="token plain">/list</span></div></pre></div><p>不开启 <code>exportStatic</code> 时，输出，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">- index.html</span></div></pre></div><p>设置 <code>exportStatic: <!-- -->{<!-- -->}</code> 后，输出，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">- index.html</span></div><div class="token-line"><span class="token plain">- users/index.html</span></div><div class="token-line"><span class="token plain">- list/index.html</span></div></pre></div><p>设置 <code>exportStatic: <!-- -->{<!-- --> htmlSuffix: true <!-- -->}</code> 后，输出，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">- index.html</span></div><div class="token-line"><span class="token plain">- users.html</span></div><div class="token-line"><span class="token plain">- list.html</span></div></pre></div><p>若有 <a target="_blank" rel="noopener noreferrer" href="https://baike.baidu.com/item/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E4%BC%98%E5%8C%96/3132?fromtitle=SEO&amp;fromid=102990">SEO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 需求，可开启 <a href="/config#ssr">ssr</a> 配置，在 <code>umi build</code> 后，会路由（除静态路由外）渲染成有具体内容的静态 html 页面，例如如下路由配置：</p><div class="__dumi-default-code-block"><pre class="prism-code language-jsx"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// .umirc.ts | config/config.ts</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  routes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      component</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/layouts/Layout&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      routes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">,</span><span class="token plain"> component</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/pages/Index&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/bar&#x27;</span><span class="token punctuation">,</span><span class="token plain"> component</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/pages/Bar&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/news&#x27;</span><span class="token punctuation">,</span><span class="token plain"> component</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/pages/News&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/news/:id&#x27;</span><span class="token punctuation">,</span><span class="token plain"> component</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/pages/NewsDetail&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>设置 <code>{<!-- --> ssr: <!-- -->{<!-- -->}<!-- -->, exportStatic: <!-- -->{<!-- --> <!-- -->}</code> 后，输出，</p><p>会在编译后，生成如下产物：</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">- dist</span></div><div class="token-line"><span class="token plain">  - umi.js</span></div><div class="token-line"><span class="token plain">  - umi.css</span></div><div class="token-line"><span class="token plain">  - index.html</span></div><div class="token-line"><span class="token plain">  - bar</span></div><div class="token-line"><span class="token plain">    - index.html</span></div><div class="token-line"><span class="token plain">  - news</span></div><div class="token-line"><span class="token plain">    - index.html</span></div><div class="token-line"><span class="token plain">    - </span><span class="token punctuation">[</span><span class="token plain">id</span><span class="token punctuation">]</span><span class="token plain">.html</span></div></pre></div><p>考虑到预渲染后，大部分不会再用到 <code>umi.server.js</code> 服务端文件，构建完成后会删掉 <code>umi.server.js</code>  文件如果有调试、不删除 server 文件需求，可通过环境变量 <code>RM_SERVER_FILE=none</code> 来保留。</p><h2 id="externals"><a aria-hidden="true" tabindex="-1" href="/config#externals"><span class="icon icon-link"></span></a>externals</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>设置哪些模块可以不被打包，通过 <code>&lt;script&gt;</code> 或其他方式引入，通常需要和 scripts 或 headScripts 配置同时使用。</p><p>比如，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  externals</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    react</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;window.React&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  scripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;https://unpkg.com/react@17.0.1/umd/react.production.min.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>简单理解的话，可以理解为 <code>import react from &#x27;react&#x27;</code> 会被替换为 <code>const react = window.React</code>。</p><h2 id="extrababelincludes"><a aria-hidden="true" tabindex="-1" href="/config#extrababelincludes"><span class="icon icon-link"></span></a>extraBabelIncludes</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>配置额外需要做 babel 编译的 npm 包或目录。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  extraBabelIncludes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 支持绝对路径</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">join</span><span class="token punctuation">(</span><span class="token plain">__dirname</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;../../common&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 支持 npm 包</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;react-monaco-editor&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="extrababelplugins"><a aria-hidden="true" tabindex="-1" href="/config#extrababelplugins"><span class="icon icon-link"></span></a>extraBabelPlugins</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>配置额外的 babel 插件。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  extraBabelPlugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;babel-plugin-react-require&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="extrababelpresets"><a aria-hidden="true" tabindex="-1" href="/config#extrababelpresets"><span class="icon icon-link"></span></a>extraBabelPresets</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>配置额外的 babel 插件集。</p><h2 id="extrapostcssplugins"><a aria-hidden="true" tabindex="-1" href="/config#extrapostcssplugins"><span class="icon icon-link"></span></a>extraPostCSSPlugins</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>配置额外的 <a target="_blank" rel="noopener noreferrer" href="https://github.com/postcss/postcss/blob/master/docs/plugins.md">postcss 插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><h2 id="favicon"><a aria-hidden="true" tabindex="-1" href="/config#favicon"><span class="icon icon-link"></span></a>favicon</h2><ul><li>Type: <code>string</code></li></ul><p>配置 favicon 地址（href 属性）。</p><p>比如，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  favicon</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/assets/favicon.ico&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><blockquote><p>如果要使用本地的图片，图片请放到 <code>public</code> 目录</p></blockquote><p>HTML 中会生成，</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">link</span><span class="token tag"> </span><span class="token tag attr-name">rel</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">shortcut icon</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">type</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">image/x-icon</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">href</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">/assets/favicon.ico</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span></div></pre></div><h2 id="forktschecker"><a aria-hidden="true" tabindex="-1" href="/config#forktschecker"><span class="icon icon-link"></span></a>forkTSChecker</h2><ul><li>Type: <code>object</code></li></ul><p>开启 TypeScript 编译时类型检查，默认关闭。</p><h2 id="fastrefresh"><a aria-hidden="true" tabindex="-1" href="/config#fastrefresh"><span class="icon icon-link"></span></a>fastRefresh <span class="__dumi-default-badge">3.3+</span></h2><ul><li>Type: <code>object</code></li></ul><p>快速刷新（Fast Refresh），开发时可以<strong>保持组件状态</strong>，同时编辑提供<strong>即时反馈</strong>。</p><p><a href="/docs/fast-refresh">文档</a></p><h2 id="hash"><a aria-hidden="true" tabindex="-1" href="/config#hash"><span class="icon icon-link"></span></a>hash</h2><ul><li>Type: <code>boolean</code></li><li>Default: <code>false</code></li></ul><p>配置是否让生成的文件包含 hash 后缀，通常用于增量发布和避免浏览器加载缓存。</p><p>启用 hash 后，产物通常是这样，</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">+ dist</span></div><div class="token-line"><span class="token plain">  - logo.sw892d.png</span></div><div class="token-line"><span class="token plain">  - umi.df723s.js</span></div><div class="token-line"><span class="token plain">  - umi.8sd8fw.css</span></div><div class="token-line"><span class="token plain">  - index.html</span></div></pre></div><p>注：</p><ul><li>html 文件始终没有 hash</li></ul><h2 id="headscripts"><a aria-hidden="true" tabindex="-1" href="/config#headscripts"><span class="icon icon-link"></span></a>headScripts</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>配置 <code>&lt;head&gt;</code> 里的额外脚本，数组项为字符串或对象。</p><p>大部分场景下用字符串格式就够了，比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  headScripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">alert(1);</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">https://a.com/b.js</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>会生成 HTML，</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript">    </span><span class="token script language-javascript function">alert</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript number">1</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript punctuation">;</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript">  </span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">src</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">https://a.com/b.js</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token script"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span></div></pre></div><p>如果要使用额外属性，可以用对象的格式，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  headScripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> src</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/foo.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"> defer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> content</span><span class="token operator">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">alert(&#x27;你好&#x27;);</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> charset</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;utf-8&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>会生成 HTML，</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">src</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">/foo.js</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">defer</span><span class="token tag punctuation">&gt;</span><span class="token script"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">charset</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">utf-8</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript">    </span><span class="token script language-javascript function">alert</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript string">&#x27;你好&#x27;</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript punctuation">;</span><span class="token script language-javascript"></span></div><div class="token-line"><span class="token script language-javascript">  </span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span></div></pre></div><h2 id="history"><a aria-hidden="true" tabindex="-1" href="/config#history"><span class="icon icon-link"></span></a>history</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- --> type: &#x27;browser&#x27; <!-- -->}</code></li></ul><p>配置 <a target="_blank" rel="noopener noreferrer" href="https://github.com/ReactTraining/history/blob/master/docs/getting-started.md">history 类型和配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><p>包含以下子配置项：</p><ul><li>type，可选 <code>browser</code>、<code>hash</code> 和 <code>memory</code></li><li>options，传给 create<!-- -->{<!-- -->{<!-- -->{<!-- --> type <!-- -->}<!-- -->}<!-- -->}<!-- -->History 的配置项，每个类型器的配置项不同</li></ul><p>注意，</p><ul><li>options 中，<code>getUserConfirmation</code> 由于是函数的格式，暂不支持配置</li><li>options 中，<code>basename</code> 无需配置，通过 umi 的 <code>base</code> 配置指定</li></ul><h2 id="ignoremomentlocale"><a aria-hidden="true" tabindex="-1" href="/config#ignoremomentlocale"><span class="icon icon-link"></span></a>ignoreMomentLocale</h2><ul><li>Type: <code>boolean</code></li><li>Default: <code>false</code></li></ul><p>忽略 moment 的 locale 文件，用于减少尺寸。</p><h2 id="inlinelimit"><a aria-hidden="true" tabindex="-1" href="/config#inlinelimit"><span class="icon icon-link"></span></a>inlineLimit</h2><ul><li>Type: <code>number</code></li><li>Default: <code>10000</code> (10k)</li></ul><p>配置图片文件是否走 base64 编译的阈值。默认是 10000 字节，少于他会被编译为 base64 编码，否则会生成单独的文件。</p><h2 id="lessloader"><a aria-hidden="true" tabindex="-1" href="/config#lessloader"><span class="icon icon-link"></span></a>lessLoader</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>设置 <a target="_blank" rel="noopener noreferrer" href="https://github.com/webpack-contrib/less-loader">less-loader 配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><h2 id="links"><a aria-hidden="true" tabindex="-1" href="/config#links"><span class="icon icon-link"></span></a>links</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>配置额外的 link 标签。</p><h2 id="manifest"><a aria-hidden="true" tabindex="-1" href="/config#manifest"><span class="icon icon-link"></span></a>manifest</h2><ul><li>Type: <code>object</code></li></ul><p>配置是否需要生成额外用于描述产物的 manifest 文件，默认会生成 <code>asset-manifest.json</code>。</p><p>包含以下子配置项：</p><ul><li>fileName，文件名，默认是 <code>asset-manifest.json</code></li><li>publicPath，默认会使用 webpack 的 <code>output.publicPath</code> 配置</li><li>basePath，给所有文件路径加前缀</li><li>writeToFileEmit，开发模式下，写 manifest 到文件系统中</li></ul><p>注意：</p><ul><li>只在 <code>umi build</code> 时会生成</li></ul><h2 id="metas"><a aria-hidden="true" tabindex="-1" href="/config#metas"><span class="icon icon-link"></span></a>metas</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>配置额外的 meta 标签。数组中可以配置<code>key:value</code>形式的对象。</p><p>最终生成的 meta 标签格式为: <code>&lt;meta key1=&quot;value1&quot; key2=&quot;value2&quot;/&gt;</code>。</p><p>如以下配置:</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  metas</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;keywords&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      content</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;umi, umijs&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;description&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      content</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;🍙 插件化的企业级前端应用框架。&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      bar</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>最终生成的 html 标签是:</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"> </span><span class="token tag attr-name">name</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">keywords</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">content</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">umi, umijs</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"> </span><span class="token tag attr-name">name</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">description</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">content</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">🍙 插件化的企业级前端应用框架。</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"> </span><span class="token tag attr-name">bar</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">foo</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span></div></pre></div><h2 id="mfsu"><a aria-hidden="true" tabindex="-1" href="/config#mfsu"><span class="icon icon-link"></span></a>mfsu <span class="__dumi-default-badge">3.5+</span></h2><ul><li>Type: <code>Object</code></li><li>Default : <code>{<!-- -->}</code></li></ul><p>Turn on the MFSU functionality and add the associated configuration.</p><blockquote><p>Enabling this feature will automatically enable <code>webpack5</code> and <code>dynamicImport</code>.</p></blockquote><p>Contains sub-attributes</p><ul><li>development: <code>{<!-- --> output: String <!-- -->}</code>。可以通过 output 自定义 dev 模式下的输出路径。用于将预编译文件同步到 git。</li><li>production: <code>{<!-- --> output: String <!-- -->}</code>。在生产模式中使用 mfsu。如果额外设置了 output，将会将生产模式预编译依赖编译到 output 下。</li><li>mfName： <code>string</code>。指定预编译依赖的变量名，默认为 <code>mf</code>，比如可在 qiankun 主应用里配置</li><li>exportAllMembers</li><li>chunks: <code>string[]</code>。mfsu 阶段的 chunks 写死了 <code>[&#x27;umi&#x27;]</code>，可通过此配置项强行修改</li><li>ignoreNodeBuiltInModules: <code>boolean</code>。配为 <code>true</code> 时不预编译 node 原生包，适用于 electron renderer</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">mfsu</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  development </span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    output </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;./.mfsu-dev&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  production </span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    output </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;./mfsu-prod&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="mock"><a aria-hidden="true" tabindex="-1" href="/config#mock"><span class="icon icon-link"></span></a>mock</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>配置 mock 属性。</p><p>包含以下子属性：</p><ul><li>exclude，格式为 <code>Array(string)</code>，用于忽略不需要走 mock 的文件</li></ul><h2 id="mountelementid"><a aria-hidden="true" tabindex="-1" href="/config#mountelementid"><span class="icon icon-link"></span></a>mountElementId</h2><ul><li>Type: <code>string</code></li><li>Default: <code>root</code></li></ul><p>指定 react app 渲染到的 HTML 元素 id。</p><p>注意：</p><ul><li>如果需要把应用打包成 umd 包导出，需设置 mountElementId 为 <code>&#x27;&#x27;</code></li></ul><h2 id="mpa"><a aria-hidden="true" tabindex="-1" href="/config#mpa"><span class="icon icon-link"></span></a>mpa <span class="__dumi-default-badge">3.1+</span></h2><ul><li>Type: <code>object</code></li></ul><p>切换渲染模式为 mpa。</p><p>包含以下特征：</p><ul><li>为每个页面输出 html</li><li>输出不包含 react-router、react-router-dom、history 等库</li><li>渲染和 url 解绑，html 文件放哪都能使用</li></ul><p>注意：</p><ul><li>只支持一级路由配置</li><li>不支持 layout 或嵌套路由的配置</li></ul><h2 id="nodemodulestransform"><a aria-hidden="true" tabindex="-1" href="/config#nodemodulestransform"><span class="icon icon-link"></span></a>nodeModulesTransform <span class="__dumi-default-badge">3.1+</span></h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- --> type: &#x27;all&#x27; <!-- -->}</code></li></ul><p>设置 node_modules 目录下依赖文件的编译方式。</p><p>子配置项包含：</p><ul><li><code>type</code>，类型，可选 <code>all</code> 和 <code>none</code></li><li><code>exclude</code>，忽略的依赖库，包名，暂不支持绝对路径</li></ul><p>两种编译模式，</p><ul><li>默认是 <code>all</code>，全部编译，然后可以通过 <code>exclude</code> 忽略不需要编译的依赖库；</li><li>可切换为 <code>none</code>，默认值编译 <a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/es5-imcompatible-versions">es5-imcompatible-versions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 里声明的依赖，可通过 <code>exclude</code> 配置添加额外需要编译的；</li></ul><p>前者速度较慢，但可规避常见的兼容性等问题，后者反之。</p><h2 id="outputpath"><a aria-hidden="true" tabindex="-1" href="/config#outputpath"><span class="icon icon-link"></span></a>outputPath</h2><ul><li>Type: <code>string</code></li><li>Default: <code>dist</code></li></ul><p>指定输出路径。</p><p>注意：</p><ul><li>不允许设定为 <code>src</code>、<code>public</code>、<code>pages</code>、<code>mock</code>、<code>config</code> 等约定目录</li></ul><h2 id="plugins"><a aria-hidden="true" tabindex="-1" href="/config#plugins"><span class="icon icon-link"></span></a>plugins</h2><ul><li>Type: <code>Array(string)</code></li><li>Default: <code>[]</code></li></ul><p>配置额外的 umi 插件。</p><p>数组项为指向插件的路径，可以是 npm 依赖、相对路径或绝对路径。如果是相对路径，则会从项目根目录开始找。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// npm 依赖</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;umi-plugin-hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 相对路径</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;./plugin&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 绝对路径</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">__dirname</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/plugin.js</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>插件的参数平级的配置项声明，比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;umi-plugin-hello&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  hello</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>配置项的名字通常是插件名去掉 <code>umi-plugin-</code> 或 <code>@umijs/plugin</code> 前缀。</p><h2 id="polyfill"><a aria-hidden="true" tabindex="-1" href="/config#polyfill"><span class="icon icon-link"></span></a>polyfill</h2><ul><li>Type: <code>{<!-- --> imports: string[] <!-- -->}</code></li></ul><p>设置按需引入 polyfill，对应 core-js 的<a target="_blank" rel="noopener noreferrer" href="https://github.com/zloirock/core-js#commonjs-api">引入范围<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，默认全量引入。</p><p>只引入稳定功能：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">export default {</span></div><div class="token-line"><span class="token plain">  polyfill: {</span></div><div class="token-line"><span class="token plain">    imports: [</span></div><div class="token-line"><span class="token plain">      &#x27;core-js/stable&#x27;,</span></div><div class="token-line"><span class="token plain">    ]</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain">}</span></div></pre></div><p>或自行按需引入：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">export default {</span></div><div class="token-line"><span class="token plain">  polyfill: {</span></div><div class="token-line"><span class="token plain">    imports: [</span></div><div class="token-line"><span class="token plain">      &#x27;core-js/features/promise/try&#x27;,</span></div><div class="token-line"><span class="token plain">      &#x27;core-js/proposals/math-extensions&#x27;</span></div><div class="token-line"><span class="token plain">    ]</span></div><div class="token-line"><span class="token plain">  },</span></div><div class="token-line"><span class="token plain">}</span></div></pre></div><p>注意：</p><ul><li>设置 <code>BABEL_POLYFILL=none</code> 环境变量后，该配置失效，且无 polyfill 引入。</li></ul><h2 id="postcssloader"><a aria-hidden="true" tabindex="-1" href="/config#postcssloader"><span class="icon icon-link"></span></a>postcssLoader</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>设置 <a target="_blank" rel="noopener noreferrer" href="https://github.com/postcss/postcss-loader#options">postcss-loader 配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><h2 id="presets"><a aria-hidden="true" tabindex="-1" href="/config#presets"><span class="icon icon-link"></span></a>presets</h2><ul><li>Type: <code>Array(string)</code></li><li>Default: <code>[]</code></li></ul><p>同 <code>plugins</code> 配置，用于配置额外的 umi 插件集。</p><h2 id="proxy"><a aria-hidden="true" tabindex="-1" href="/config#proxy"><span class="icon icon-link"></span></a>proxy</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>配置代理能力。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">export default {</span></div><div class="token-line"><span class="token plain">  proxy: {</span></div><div class="token-line"><span class="token plain">    &#x27;/api&#x27;: {</span></div><div class="token-line"><span class="token plain">      &#x27;target&#x27;: &#x27;http://jsonplaceholder.typicode.com/&#x27;,</span></div><div class="token-line"><span class="token plain">      &#x27;changeOrigin&#x27;: true,</span></div><div class="token-line"><span class="token plain">      &#x27;pathRewrite&#x27;: { &#x27;^/api&#x27; : &#x27;&#x27; },</span></div><div class="token-line"><span class="token plain">    },</span></div><div class="token-line"><span class="token plain">  },</span></div><div class="token-line"><span class="token plain">}</span></div></pre></div><p>然后访问 <code>/api/users</code> 就能访问到 <a target="_blank" rel="noopener noreferrer" href="http://jsonplaceholder.typicode.com/users">http://jsonplaceholder.typicode.com/users<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的数据。</p><blockquote><p>注意：proxy 配置仅在 dev 时生效。</p></blockquote><h2 id="publicpath"><a aria-hidden="true" tabindex="-1" href="/config#publicpath"><span class="icon icon-link"></span></a>publicPath</h2><ul><li>Type: <code>publicPath</code></li><li>Default: <code>/</code></li></ul><p>配置 webpack 的 publicPath。当打包的时候，webpack 会在静态文件路径前面添加 <code>publicPath</code> 的值，当你需要修改静态文件地址时，比如使用 CDN 部署，把 <code>publicPath</code> 的值设为 CDN 的值就可以。如果使用一些特殊的文件系统，比如混合开发或者 cordova 等技术，可以尝试将 <code>publicPath</code> 设置成 <code>./</code> 相对路径。</p><blockquote><p>相对路径 <code>./</code> 有一些限制，例如不支持多层路由 <code>/foo/bar</code>，只支持单层路径 <code>/foo</code></p></blockquote><p>如果你的应用部署在域名的子路径上，例如 <code>https://www.your-app.com/foo/</code>，你需要设置 <code>publicPath</code> 为 <code>/foo/</code>，如果同时要兼顾开发环境正常调试，你可以这样配置：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  publicPath</span><span class="token operator">:</span><span class="token plain"> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;production&#x27;</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string">&#x27;/foo/&#x27;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h2 id="routes"><a aria-hidden="true" tabindex="-1" href="/config#routes"><span class="icon icon-link"></span></a>routes</h2><ul><li>Type: <code>Array(route)</code></li></ul><p>配置路由。</p><p>umi 的路由基于 <a target="_blank" rel="noopener noreferrer" href="https://reacttraining.com/react-router/web/guides/quick-start">react-router@5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实现，配置和 react-router 基本一致，详见<a href="/docs/routing">路由配置</a>章节。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  routes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      component</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;@/layouts/index&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      routes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/user&#x27;</span><span class="token punctuation">,</span><span class="token plain"> redirect</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/user/login&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/user/login&#x27;</span><span class="token punctuation">,</span><span class="token plain"> component</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;./user/login&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>注意：</p><ul><li><code>component</code> 的值如果是相对路径，会以 <code>src/pages</code> 为基础路径开始解析</li><li>如果配置了 <code>routes</code>，则优先使用配置式路由，且约定式路由会不生效</li></ul><h2 id="runtimehistory"><a aria-hidden="true" tabindex="-1" href="/config#runtimehistory"><span class="icon icon-link"></span></a>runtimeHistory</h2><ul><li>Type: <code>object</code></li></ul><p>配置是否需要动态变更 history 类型。</p><p>设置 runtimeHistory 后，可以在运行时动态修改 history 类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> setCreateHistoryOptions </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function">setCreateHistoryOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;memory&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h2 id="runtimepublicpath"><a aria-hidden="true" tabindex="-1" href="/config#runtimepublicpath"><span class="icon icon-link"></span></a>runtimePublicPath</h2><ul><li>Type: <code>boolean</code></li><li>Default: <code>false</code></li></ul><p>配置是否启用运行时 publicPath。</p><p>通常用于一套代码在不同环境有不同的 publicPath 需要，然后 publicPath 由服务器通过 HTML 的 <code>window.publicPath</code> 全局变量输出。</p><p>启用后，打包时会额外加上这一段，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">__webpack_public_path__ </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">resourceBaseUrl</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">publicPath</span><span class="token punctuation">;</span></div></pre></div><p>然后 webpack 在异步加载 JS 等资源文件时会从 <code>window.resourceBaseUrl</code> 或 <code>window.publicPath</code> 里开始找。</p><h2 id="ssr"><a aria-hidden="true" tabindex="-1" href="/config#ssr"><span class="icon icon-link"></span></a>ssr <span class="__dumi-default-badge">3.2+</span></h2><ul><li>Type: <code>object</code></li><li>Default: <code>false</code></li></ul><p>配置是否开启服务端渲染，配置如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 一键开启</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  ssr</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 更多配置</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// forceInitial: false,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// removeWindowInitialProps: false</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// devServerRender: true,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// mode: &#x27;string&#x27;,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// staticMarkup: false,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>配置说明：</p><ul><li><code>forceInitial</code>：客户端渲染时强制执行 <code>getInitialProps</code> 方法，常见的场景：静态站点希望每次访问时保持数据最新，以客户端渲染为主。</li><li><code>removeWindowInitialProps</code>: HTML 中移除 <code>window.getInitialProps</code> 变量，避免 HTML 中有大量数据影响 SEO 效果，场景：静态站点</li><li><code>devServerRender</code>：在 <code>umi dev</code> 开发模式下，执行渲染，用于 umi SSR 项目的快速开发、调试，服务端渲染效果所见即所得，同时我们考虑到可能会与服务端框架（如 <a target="_blank" rel="noopener noreferrer" href="https://eggjs.org/">Egg.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、<a target="_blank" rel="noopener noreferrer" href="https://expressjs.com/">Express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、<a target="_blank" rel="noopener noreferrer" href="https://koajs.com/">Koa<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）结合做本地开发、调试，关闭后，在 <code>umi dev</code> 下不执行服务端渲染，但会生成 <code>umi.server.js</code>（Umi SSR 服务端渲染入口文件），渲染开发流程交由开发者处理。</li><li><code>mode</code>：渲染模式，默认使用 <code>string</code> 字符串渲染，同时支持流式渲染 <code>mode: &#x27;stream&#x27;</code>，减少 TTFB（浏览器开始收到服务器响应数据的时间） 时长。</li><li><code>staticMarkup</code>：html 上的渲染属性（例如 React 渲染的 <code>data-reactroot</code>），常用于静态站点生成的场景上。</li></ul><p>注意：</p><ul><li>开启后，执行 <code>umi dev</code> 时，访问 <a target="_blank" rel="noopener noreferrer" href="http://localhost:8000/">http://localhost:8000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，默认将单页应用（SPA）渲染成 html 片段，片段可以通过开发者工具『显示网页源代码』进行查看。</li><li>执行 <code>umi build</code>，产物会额外生成 <code>umi.server.js</code> 文件，此文件运行在 Node.js 服务端，用于做服务端渲染，渲染 html 片段。</li><li>如果应用没有 Node.js 服务端，又希望生成 html 片段做 SEO（搜索引擎优化），可以开启 <a href="/config#exportstatic">exportStatic</a> 配置，会在执行 <code>umi build</code> 构建时进行<strong>预渲染</strong>。</li><li><code>removeWindowInitialProps</code> 与 <code>forceInitial</code> 不可同时使用</li></ul><p>了解更多，可点击 <a href="/zh-CN/docs/ssr">服务端渲染文档</a>。</p><h2 id="scripts"><a aria-hidden="true" tabindex="-1" href="/config#scripts"><span class="icon icon-link"></span></a>scripts</h2><ul><li>Type: <code>Array</code></li><li>Default: <code>[]</code></li></ul><p>同 <a href="/config#headscripts">headScripts</a>，配置 <code>&lt;body&gt;</code> 里的额外脚本。</p><h2 id="singular"><a aria-hidden="true" tabindex="-1" href="/config#singular"><span class="icon icon-link"></span></a>singular</h2><ul><li>Type: <code>boolean</code></li><li>Default: <code>false</code></li></ul><p>配置是否启用单数模式的目录。</p><p>比如 <code>src/pages</code> 的约定在开启后为 <code>src/page</code> 目录，<a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/plugins">@umijs/plugins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 里的插件也遵照此配置的约定。</p><h2 id="styleloader"><a aria-hidden="true" tabindex="-1" href="/config#styleloader"><span class="icon icon-link"></span></a>styleLoader</h2><ul><li>Type: <code>object</code></li></ul><p>启用并设置 <a target="_blank" rel="noopener noreferrer" href="https://github.com/webpack-contrib/style-loader">style-loader 配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，用于让 CSS 内联打包在 JS 中，不输出额外的 CSS 文件。</p><h2 id="styles"><a aria-hidden="true" tabindex="-1" href="/config#styles"><span class="icon icon-link"></span></a>styles</h2><ul><li>Type: <code>Array(string)</code></li><li>Default: <code>[]</code></li></ul><p>配置额外 CSS。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  styles</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">body { color: red; }</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">https://a.com/b.css</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>会生成 HTML，</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">style</span><span class="token tag punctuation">&gt;</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">    </span><span class="token style language-css selector">body</span><span class="token style language-css"> </span><span class="token style language-css punctuation">{</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">      </span><span class="token style language-css property">color</span><span class="token style language-css punctuation">:</span><span class="token style language-css"> </span><span class="token style language-css color">red</span><span class="token style language-css punctuation">;</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">    </span><span class="token style language-css punctuation">}</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">  </span><span class="token tag punctuation">&lt;/</span><span class="token tag">style</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">link</span><span class="token tag"> </span><span class="token tag attr-name">rel</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">stylesheet</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">href</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">https://a.com/b.css</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span></div></pre></div><h2 id="targets"><a aria-hidden="true" tabindex="-1" href="/config#targets"><span class="icon icon-link"></span></a>targets</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- --> chrome: 49, firefox: 64, safari: 10, edge: 13, ios: 10 <!-- -->}</code></li></ul><p>配置需要兼容的浏览器最低版本，会自动引入 polyfill 和做语法转换。</p><p>比如要兼容 ie11，需配置：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  targets</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    ie</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">11</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>注意：</p><ul><li>配置的 targets 会和合并到默认值，不需要重复配置</li><li>子项配置为 <code>false</code> 可删除默认配置的版本号</li></ul><h2 id="terseroptions"><a aria-hidden="true" tabindex="-1" href="/config#terseroptions"><span class="icon icon-link"></span></a>terserOptions</h2><ul><li>Type: <code>object</code></li><li>Default: <a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi/blob/master/packages/bundler-webpack/src/getConfig/terserOptions.ts">terserOptions.ts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>配置<a target="_blank" rel="noopener noreferrer" href="https://github.com/terser/terser#minify-options">压缩器 terser 的配置项<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p><h2 id="theme"><a aria-hidden="true" tabindex="-1" href="/config#theme"><span class="icon icon-link"></span></a>theme</h2><ul><li>Type: <code>object</code></li><li>Default: <code>{<!-- -->}</code></li></ul><p>配置主题，实际上是配 less 变量。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  theme</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token string">&#x27;@primary-color&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;#1DA57A&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="title"><a aria-hidden="true" tabindex="-1" href="/config#title"><span class="icon icon-link"></span></a>title</h2><ul><li>Type: <code>string</code></li><li>Default: <code>&#x27;&#x27;</code></li></ul><p>配置标题。</p><p>比如：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;hi&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>此外，你还可以针对路由配置标题，比如，</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;hi&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  routes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">,</span><span class="token plain"> title</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;Home&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/users&#x27;</span><span class="token punctuation">,</span><span class="token plain"> title</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;Users&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/foo&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>然后我们访问 <code>/</code> 标题是 <code>Home</code>，访问 <code>/users</code> 标题是 <code>Users</code>，访问 <code>/foo</code> 标题是默认的 <code>hi</code>。</p><p>注意：</p><ul><li>默认不会在 HTML 里输出 <code>&lt;title&gt;</code> 标签，通过动态渲染得到</li><li>配 <code>exportStatic</code> 后会为每个 HTML 输出 <code>&lt;title&gt;</code> 标签</li><li>如果需要自行通过 react-helment 等方式渲染 title，配 <code>title: false</code> 可禁用内置的 title 渲染机制</li></ul><h2 id="webpack5"><a aria-hidden="true" tabindex="-1" href="/config#webpack5"><span class="icon icon-link"></span></a>webpack5 <span class="__dumi-default-badge">3.4+</span></h2><ul><li>Type: <code>object</code></li><li>Default: <code>false</code></li></ul><p>使用 webpack 5 代替 webpack 4 进行构建。</p><p>物理缓存功能默认开启，可通过设置环境变量 <code>WEBPACK_FS_CACHE</code> 为 <code>none</code> 来禁用。</p><p>包含以下子配置项：</p><ul><li>lazyCompilation，是否启用基于路由的按需编译</li></ul><h2 id="workerloader"><a aria-hidden="true" tabindex="-1" href="/config#workerloader"><span class="icon icon-link"></span></a>workerLoader <span class="__dumi-default-badge">3.4.1+</span></h2><ul><li>Type: <code>object</code></li><li>Default: <code>false</code></li></ul><p>开启 worker-loader 功能。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/umi/edit/master/docs/config/README.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last update: ">1/14/2022 16:34:56</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/umi.js"></script>
  </body>
</html>
